// Vite plugin for Olova JSX transformation
export default function olovaPlugin(options = {}) {
  return {
    name: "vite-plugin-olova",

    config() {
      return {
        esbuild: {
          jsxFactory: "h",
          jsxFragment: "Fragment",
          jsxInject: `import { h } from 'olova'`,
        },
        resolve: {
          alias: {
            // Add any aliases you need
            "@olova": "olova",
          },
        },
        optimizeDeps: {
          include: ["olova"],
        },
      };
    },

    // Optional: Transform hook if you need custom transformations beyond esbuild
    async transform(code, id) {
      if (!id.endsWith(".jsx") && !id.endsWith(".tsx")) {
        return null;
      }

      // Add any custom transformations here if needed
      return {
        code,
        map: null,
      };
    },
  };
}
